# 实验三：数值积分的收敛性

## 实验背景

数值积分是计算物理中的基础技术，用于求解无法通过解析方法直接计算的定积分。本实验将探究不同数值积分方法的收敛性和精度。

我们将计算以下定积分：

$$
I = \int_{-1}^1 \sqrt{1-x^2} d x.
$$

这个积分实际上表示半径为1的半圆的面积：
<img width="619" alt="image" src="https://github.com/user-attachments/assets/3c6385a4-4453-402e-8073-f5c9ff6c780f" />

因此积分的解析解为 $\frac{1}{2}\pi=1.57079632679\ldots$。

## 实验目标

1. 理解数值积分的基本原理
2. 实现并比较不同的数值积分方法
3. 分析数值积分方法的收敛性和精度
4. 探究步长对数值积分精度的影响

## 实验任务

### 任务一：矩形法（左矩形法）

最简单的数值积分方法是将积分区间分成 $N$ 个等长子区间，用每个子区间左端点的函数值乘以子区间长度作为该子区间上的积分近似值。

1. 实现矩形法计算积分：我们可以把积分区间分成 $N$ 个子区间, 子区间长度为 $h=2/N$, 积分可以表示为

$$
I = \lim_{N\to\infty} \sum_{k=1}^N hy_k\,,
$$

这里

$$
y_k = \sqrt{1 - x_k^2}, \qquad
x_k = -1 + hk.
$$

2. 对于函数 $f(x) = \sqrt{1-x^2}$，计算 $N=10, 100, 1000, 10000$ 时的积分近似值
3. 计算相对误差并绘制误差-步长关系图（对数坐标）

### 任务二：梯形法
梯形法是将积分区间分成 $N$ 个等长子区间，用每个子区间上的梯形面积作为该子区间上的积分近似值。

1. 实现梯形法计算积分
   
2. 对于函数 $f(x) = \sqrt{1-x^2}$，计算 $N=10, 100, 1000, 10000$ 时的积分近似值
3. 计算相对误差并绘制误差-步长关系图（对数坐标）

### 任务三：比较与分析
1. 在同一图表中比较两种方法的误差曲线
2. 分析两种方法的收敛阶数（斜率）
3. 确定在相同计算量下，哪种方法精度最高
4. 探究计算时间与精度的关系：如果限制程序运行时间不超过1秒，各方法能达到的最高精度是多少？
## 提交要求
1. 完成 integration.py 文件中的函数实现
2. 提交实验报告，包含：
   - 实验方法说明
   - 数据表格（不同N下的积分值和相对误差）
   - 误差-步长关系图（对数坐标）
   - 分析与讨论（收敛阶数、方法比较、时间-精度权衡）
   - 结论
## 评分标准
- 代码实现（40%）：正确实现三种数值积分方法
- 数据分析（30%）：正确计算误差并绘制图表
- 实验报告（30%）：分析深度、结论合理性、报告完整性
