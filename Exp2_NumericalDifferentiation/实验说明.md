# 实验二：数值微分的误差权衡

## 实验背景

数值微分是计算物理中的基础技术，但在实际计算中会面临截断误差与舍入误差的双重挑战。导数的定义为：

$$
{d f\over d x} = \lim_{\delta\to0} {f(x+\delta)-f(x)\over\delta}.
$$

在计算机中，我们无法实现 $\delta\to 0$，只能使 $\delta$ 足够小。然而，当 $\delta$ 过小时，舍入误差会显著影响计算结果。

## 实验目标

1. 理解数值微分中截断误差与舍入误差的权衡关系
2. 观察有限差分法计算导数时的误差变化规律
3. 分析步长对数值微分精度的影响
4. 确定最优步长范围

## 实验任务

### 任务一：前向差分法计算导数

1. 实现函数 `f(x)` 返回 `x(x-1)`
2. 使用前向差分公式计算函数在 x=1 点的导数：
   ```python
   def forward_diff(f, x, delta):
       return (f(x + delta) - f(x)) / delta
   ```

3. 分别取 $\delta = 10^{-2}, 10^{-4}, 10^{-6}, 10^{-8}, 10^{-10}, 10^{-12}, 10^{-14}$
4. 计算每个步长下的数值导数值，与解析解 (f'(1) = 1) 比较
5. 计算相对误差并绘制误差-步长关系图（对数坐标）
### 任务二：中心差分法计算导数
1. 实现中心差分公式计算导数：
   ```python
   def central_diff(f, x, delta):
       return (f(x + delta) - f(x - delta)) / (2 * delta)
    ```
2. 使用与任务一相同的步长序列
3. 计算每个步长下的数值导数值，与解析解比较
4. 计算相对误差并绘制误差-步长关系图（对数坐标）
### 任务三：比较与分析
1. 在同一图表中比较前向差分和中心差分的误差曲线
2. 分析两种方法的收敛阶数（斜率）
3. 解释为什么误差随步长减小先减小后增大
4. 确定两种方法的最优步长范围
## 提交要求
1. 完成 differentiation.py 文件中的函数实现
2. 提交实验报告，包含：
   - 实验方法说明
   - 数据表格（不同步长下的导数值和相对误差）
   - 误差-步长关系图（对数坐标）
   - 分析与讨论（误差来源、最优步长、方法比较）
   - 结论
